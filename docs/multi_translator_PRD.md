# Multi-Language Web Translator
## Product Requirements Document (PRD)
**v1.0 | 2025**

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” Gemini 2.5 Flash APIë¥¼ í™œìš©í•˜ëŠ” ì›¹ ê¸°ë°˜ ë‹¤êµ­ì–´ ë²ˆì—­ê¸°ì˜ ê°œë°œ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•œë‹¤. ê¸°ì¡´ Flutter ì•±ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ë˜ ë²ˆì—­ê¸°ì˜ ê²½í—˜ì„ í† ëŒ€ë¡œ, ëª¨ë°”ì¼/PC ë°˜ì‘í˜• ì›¹ì‚¬ì´íŠ¸ë¡œ ì¬êµ¬í˜„í•˜ë©° íšŒì› ê¸°ëŠ¥ê³¼ ë²ˆì—­ ì´ë ¥ ì €ì¥ ê¸°ëŠ¥ì„ í¬í•¨í•œë‹¤.

### 1.1 í”„ë¡œì íŠ¸ ëª©í‘œ

- Gemini 2.5 Flashë¥¼ ì´ìš©í•œ ê³ í’ˆì§ˆ ë‹¤êµ­ì–´ ë²ˆì—­ ì œê³µ
- ëª¨ë°”ì¼Â·PC í™˜ê²½ ëª¨ë‘ ì§€ì›í•˜ëŠ” ë°˜ì‘í˜• ì›¹ ì„œë¹„ìŠ¤ êµ¬ì¶•
- íšŒì›ì œ ê¸°ë°˜ì˜ í”„ë¡¬í”„íŠ¸ í”„ë¦¬ì…‹(systemPrompt / translatePrompt) ì €ì¥ ê¸°ëŠ¥
- ì–¸ì–´ë³„ êµ¬ë¶„ìë¥¼ í™œìš©í•œ ë²ˆì—­ ê²°ê³¼ íŒŒì‹± ë° ë³µì‚¬ ê¸°ëŠ¥
- Next.js + Supabase + Vercel ìŠ¤íƒìœ¼ë¡œ ë¹ ë¥¸ ê°œë°œ ë° ë°°í¬

### 1.2 ë²”ìœ„ ì™¸ í•­ëª©

- Flutter ì•ˆë“œë¡œì´ë“œ/iOS ì•± (ì¶”í›„ ê³ ê° ìš”ì²­ ì‹œ ê²€í† )
- ì†Œì…œ ë¡œê·¸ì¸(êµ¬ê¸€ ë“±) ì—°ë™
- ì•„ì´ë”” ì°¾ê¸° / ë¹„ë°€ë²ˆí˜¸ ê¸°ëŠ¥
- ë²ˆì—­ ê¸°ë¡ ì¡°íšŒ UI (ë°ì´í„° ì €ì¥ì€ í•˜ë˜, ì¡°íšŒ í™”ë©´ ë¯¸ì œê³µ)
- í”„ë¡¬í”„íŠ¸ ìˆ˜ì • ê¸°ëŠ¥ (ì¶”í›„ ìš”ì²­ ì‹œ ê²€í† )

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  | ë¹„ê³  |
|------|------|------|
| í”„ë¡ íŠ¸ì—”ë“œ | Next.js 14 (App Router) | React Server Components í™œìš© |
| ìŠ¤íƒ€ì¼ë§ | Tailwind CSS + shadcn/ui | ë°˜ì‘í˜• UI ì»´í¬ë„ŒíŠ¸ |
| ë°±ì—”ë“œ | Next.js API Route | ë‹¨ìˆœ ë°ì´í„° ì…ë ¥/ì¡°íšŒìš© |
| ë°ì´í„°ë² ì´ìŠ¤ | Supabase (PostgreSQL) | ê³„ì •Â·ë²ˆì—­ ë°ì´í„° ì €ì¥ |
| AI API | Gemini 2.5 Flash | Google AI Studio API |
| ë°°í¬ | Vercel | CI/CD ìë™í™” |

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 3.1 ê³„ì • í…Œì´ë¸” (`multi_translator_account`)

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ | ì„¤ëª… |
|--------|------|------|------|
| id | UUID | PK, DEFAULT gen_random_uuid() | ë‚´ë¶€ ì‹ë³„ì |
| user_id | VARCHAR(50) | UNIQUE, NOT NULL | ì‚¬ìš©ìê°€ ì…ë ¥í•˜ëŠ” ì•„ì´ë”” |
| created_at | TIMESTAMPTZ | DEFAULT now() | ê°€ì… ì‹œê° |

> â€» ë¹„ë°€ë²ˆí˜¸ ë¯¸ì‚¬ìš© â€” ì•„ì´ë””ë§Œìœ¼ë¡œ ì‹ë³„í•˜ë©° ë¡œê·¸ì¸ ì •ë³´ëŠ” ë¸Œë¼ìš°ì € ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë³´ê´€í•œë‹¤.

### 3.2 ê³„ì • ì„¤ì • í…Œì´ë¸” (`multi_translator_account_settings`)

íšŒì›ë³„ë¡œ **ë²ˆì—­ ëŒ€ìƒì ì •ë³´**ì™€ **ì¶œë ¥ ì–¸ì–´ ì„¤ì •**ì„ ì €ì¥í•œë‹¤. ê³„ì •ë‹¹ 1í–‰(UNIQUE on account_id)ìœ¼ë¡œ ìœ ì§€í•˜ë©°, ì„¤ì • ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ì‹œ upsertí•œë‹¤.

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ | ì„¤ëª… |
|--------|------|------|------|
| id | UUID | PK, DEFAULT gen_random_uuid() | ë‚´ë¶€ ì‹ë³„ì |
| account_id | UUID | FK â†’ account.id, UNIQUE, NOT NULL | íšŒì› ê³„ì • ì°¸ì¡°í‚¤ |
| recipient_country | VARCHAR(50) | | ë²ˆì—­ ëŒ€ìƒì êµ­ê°€ (ì˜ˆ: India, USA) |
| recipient_gender | VARCHAR(20) | | ë²ˆì—­ ëŒ€ìƒì ì„±ë³„ (ì˜ˆ: male, female) |
| output_langs | TEXT[] | | ì €ì¥ëœ ì¶œë ¥ ì–¸ì–´ ì½”ë“œ ë°°ì—´ (ì˜ˆ: {en, te}) |
| updated_at | TIMESTAMPTZ | DEFAULT now() | ì„¤ì • ìµœì¢… ìˆ˜ì • ì‹œê° |

### 3.3 ë²ˆì—­ ë°ì´í„° í…Œì´ë¸” (`multi_translator_data`)

| ì»¬ëŸ¼ëª… | íƒ€ì… | ì œì•½ | ì„¤ëª… |
|--------|------|------|------|
| id | UUID | PK | ë²ˆì—­ ë ˆì½”ë“œ ì‹ë³„ì |
| account_id | UUID | FK â†’ account.id | íšŒì› ê³„ì • ì°¸ì¡°í‚¤ |
| input_text | TEXT | NOT NULL | ë²ˆì—­ ì›ë¬¸(ì…ë ¥) |
| gemini_raw_response | TEXT | NOT NULL | Gemini ì‘ë‹µ ì „ë¬¸ |
| parsed_results | JSONB | | ì–¸ì–´ë³„ ì¶”ì¶œ ê²°ê³¼ `{"en":"...", "ko":"..."}` |
| input_lang | VARCHAR(20) | | ì…ë ¥ ì–¸ì–´ ì½”ë“œ (ì˜ˆ: ko) |
| output_langs | TEXT[] | | ì¶œë ¥ ì–¸ì–´ ì½”ë“œ ë°°ì—´ (ì˜ˆ: {en, te}) |
| recipient_country | VARCHAR(50) | | í•´ë‹¹ ë²ˆì—­ ì‹œ ì‚¬ìš©í•œ ëŒ€ìƒì êµ­ê°€ |
| recipient_gender | VARCHAR(20) | | í•´ë‹¹ ë²ˆì—­ ì‹œ ì‚¬ìš©í•œ ëŒ€ìƒì ì„±ë³„ |
| created_at | TIMESTAMPTZ | DEFAULT now() | ë²ˆì—­ ìš”ì²­ ì‹œê° |

---

## 4. í˜ì´ì§€ êµ¬ì„±

| ê²½ë¡œ | í˜ì´ì§€ëª… | ì„¤ëª… |
|------|---------|------|
| `/` | ë²ˆì—­ ë©”ì¸ | ë²ˆì—­ ì‹¤í–‰ í•µì‹¬ í™”ë©´ |
| `/register` | íšŒì›ê°€ì… | ì•„ì´ë”” ì…ë ¥ ë° ê³„ì • ìƒì„± |
| `/login` | ë¡œê·¸ì¸ | ì•„ì´ë”” ì…ë ¥ â†’ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ |

---

## 5. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 5.1 íšŒì›ê°€ì… / ë¡œê·¸ì¸

#### íšŒì›ê°€ì… (`/register`)

- ì•„ì´ë””(user_id)ë§Œ ì…ë ¥ë°›ì•„ `multi_translator_account` í…Œì´ë¸”ì— ì €ì¥
- ì¤‘ë³µ ì•„ì´ë”” ê²€ì‚¬: Supabase UNIQUE ì œì•½ ì¡°ê±´ìœ¼ë¡œ ì²˜ë¦¬
- ê°€ì… ì™„ë£Œ ì‹œ user_idë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³  ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- ì•„ì´ë”” ì°¾ê¸° / ë¹„ë°€ë²ˆí˜¸ ê¸°ëŠ¥ ì—†ìŒ

#### ë¡œê·¸ì¸ (`/login`)

- ì•„ì´ë”” ì…ë ¥ â†’ Supabaseì—ì„œ user_id ì¡´ì¬ ì—¬ë¶€ ì¡°íšŒ
- ì¡´ì¬ ì‹œ: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— user_id ì €ì¥ â†’ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
- ë¯¸ì¡´ì¬ ì‹œ: "ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë””ì…ë‹ˆë‹¤" ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
- ì•± ë¡œë“œ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— user_idê°€ ìˆìœ¼ë©´ ìë™ ë¡œê·¸ì¸ ìœ ì§€
- ë¡œê·¸ì•„ì›ƒ: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì˜ user_id ì‚­ì œ

### 5.2 ë²ˆì—­ ë©”ì¸ í™”ë©´ (`/`)

#### ë²ˆì—­ ëŒ€ìƒì ì •ë³´ (UI ì¶”ê°€)

- **êµ­ê°€ ì„ íƒ**: ë“œë¡­ë‹¤ìš´ 1ê°œ. ë²ˆì—­ì„ ë°›ëŠ” ì‚¬ëŒì˜ êµ­ê°€ë¥¼ ì„ íƒí•œë‹¤. (ì˜ˆ: ì¸ë„, ë¯¸êµ­, í•„ë¦¬í•€ â€” ëª©ë¡ì€ ìƒìˆ˜ íŒŒì¼ë¡œ ê´€ë¦¬, ì¶”í›„ í™•ì¥)
- **ì„±ë³„ ì„ íƒ**: ë“œë¡­ë‹¤ìš´ ë˜ëŠ” ë¼ë””ì˜¤. ë²ˆì—­ì„ ë°›ëŠ” ì‚¬ëŒì˜ ì„±ë³„ (ë‚¨ì„± / ì—¬ì„± / ë¯¸ì„ íƒ ë“±). í”„ë¡¬í”„íŠ¸ì—ì„œ Brother/Sister í˜¸ì¹­ ë“±ì— ë°˜ì˜
- ì €ì¥ëœ ì„¤ì •ì´ ìˆìœ¼ë©´(ë¡œê·¸ì¸ ê³„ì •ì˜ `multi_translator_account_settings`) í˜ì´ì§€ ë¡œë“œ ì‹œ í•´ë‹¹ ê°’ìœ¼ë¡œ í¼ì„ ì±„ìš´ë‹¤. ì‚¬ìš©ìê°€ ë³€ê²½ í›„ "ì„¤ì • ì €ì¥" ì‹œ ê³„ì • ì„¤ì • APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì €ì¥í•œë‹¤.

#### ì–¸ì–´ ì„¤ì •

- ì…ë ¥ ì–¸ì–´ ì„ íƒ: ë“œë¡­ë‹¤ìš´ 1ê°œ (ë‹¨ì¼ ì„ íƒ)
- ì¶œë ¥ ì–¸ì–´ ì„ íƒ: ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥ (1ê°œ ì´ìƒ í•„ìˆ˜)
- **ì„¤ì • ì €ì¥**: "ì„¤ì • ì €ì¥" ë²„íŠ¼ í´ë¦­ ì‹œ í˜„ì¬ ì„ íƒí•œ **ë²ˆì—­ ëŒ€ìƒì(êµ­ê°€, ì„±ë³„)** ì™€ **ì¶œë ¥ ì–¸ì–´**ë¥¼ `multi_translator_account_settings`ì— ì €ì¥í•œë‹¤. (ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ê°€ëŠ¥)
- ì§€ì› ì–¸ì–´ ëª©ë¡ (ì´ˆê¸° ì œê³µ, ì¶”í›„ í™•ì¥ ê°€ëŠ¥):
  - í•œêµ­ì–´ (ko)
  - ì˜ì–´ (en)
  - í…”ë£¨êµ¬ì–´ (te)
  - íŒë””ì–´ (hi)
  - ì¼ë³¸ì–´ (ja)
  - ì¤‘êµ­ì–´ ê°„ì²´ (zh-CN)
  - ì¹¸ë‚˜ë‹¤ì–´(kn)
  - ë²µê³¨ì–´(bn)

#### ë²ˆì—­ ì…ë ¥

- í…ìŠ¤íŠ¸ ì…ë ¥ ì˜ì—­ (Textarea): ëª¨ë°”ì¼ì€ ì „ì²´ ë„ˆë¹„, PCëŠ” ì¢Œì¸¡ íŒ¨ë„
- "ë²ˆì—­í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ API í˜¸ì¶œ (í˜„ì¬ ì„ íƒëœ **ë²ˆì—­ ëŒ€ìƒì êµ­ê°€Â·ì„±ë³„**, **ì…ë ¥/ì¶œë ¥ ì–¸ì–´**ë¥¼ í•¨ê»˜ ì „ë‹¬)
- ë²ˆì—­ ì™„ë£Œ ì‹œ `multi_translator_data`ì— **ì›ë¬¸, íŒŒì‹± ê²°ê³¼, ì…ë ¥/ì¶œë ¥ ì–¸ì–´, í•´ë‹¹ íšŒì°¨ì— ì‚¬ìš©í•œ ë²ˆì—­ ëŒ€ìƒì êµ­ê°€Â·ì„±ë³„**ì„ ì €ì¥í•œë‹¤.
- ë²ˆì—­ ì¤‘ ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ ë° ë²„íŠ¼ ë¹„í™œì„±í™”

#### ë²ˆì—­ ê²°ê³¼ ì¶œë ¥

- ì„ íƒí•œ ì¶œë ¥ ì–¸ì–´ ìˆ˜ë§Œí¼ ê²°ê³¼ ì¹´ë“œ(ë˜ëŠ” ì„¹ì…˜) í‘œì‹œ
- ê° ì¹´ë“œ: ì–¸ì–´ëª… ë¼ë²¨ + ë²ˆì—­ í…ìŠ¤íŠ¸ + ê°œë³„ ë³µì‚¬ ë²„íŠ¼
- "ì „ì²´ ë³µì‚¬" ë²„íŠ¼: ëª¨ë“  ì–¸ì–´ ë²ˆì—­ ê²°ê³¼ë¥¼ ì–¸ì–´ êµ¬ë¶„ì í¬í•¨í•˜ì—¬ í´ë¦½ë³´ë“œì— ë³µì‚¬
- ë³µì‚¬ ì„±ê³µ ì‹œ "ë³µì‚¬ë¨!" í† ìŠ¤íŠ¸ ì•Œë¦¼ í‘œì‹œ

---

## 6. í”„ë¡¬í”„íŠ¸ ì„¤ê³„

### 6.1 êµ¬ì„±

í”„ë¡¬í”„íŠ¸ëŠ” ë‘ ê°€ì§€ íŒŒíŠ¸ë¡œ êµ¬ì„±ëœë‹¤.

| êµ¬ë¶„ | ì—­í•  | ìˆ˜ì • ê°€ëŠ¥ ì—¬ë¶€ |
|------|------|--------------|
| systemPrompt | í˜ë¥´ì†Œë‚˜Â·ì—­í• Â·ìŠ¤íƒ€ì¼ ì§€ì • | í˜„ì¬: ê°œë°œì ì œì‘ ê¸°ë³¸ê°’. ì¶”í›„ ìš”ì²­ ì‹œ í¸ì§‘ ê¸°ëŠ¥ ì¶”ê°€ ê²€í†  |
| translatePrompt | ë²ˆì—­ ì§€ì‹œ + ì–¸ì–´Â·ì›ë¬¸ ë³€ìˆ˜ ì¡°í•© | í˜„ì¬: ê°œë°œì ì œì‘ ê¸°ë³¸ê°’. ì¶”í›„ ìš”ì²­ ì‹œ í¸ì§‘ ê¸°ëŠ¥ ì¶”ê°€ ê²€í†  |

### 6.2 systemPrompt (ê¸°ë³¸ê°’ ì˜ˆì‹œ)

Gemini APIì˜ `system_instruction` í•„ë“œì— ì‚½ì…í•œë‹¤. ì•„ë˜ëŠ” **í¬ë¦¬ìŠ¤ì²œ ì²­Â·ì¥ë…„ í•™ìƒ** ëŒ€ìƒ ë²ˆì—­ì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ë©°, **ëŒ€ìƒ êµ­ê°€**ëŠ” ì‚¬ìš©ìê°€ ì„ íƒí•œ ê°’(`{targetCountry}`)ìœ¼ë¡œ ì¹˜í™˜í•œë‹¤. ì‹¤ì œ ì„œë¹„ìŠ¤ ëŒ€ìƒì— ë§ê²Œ ì¡°ì •í•œë‹¤. **ì´ëª¨ì§€ì™€ ë¬¸ì¥í‘œí˜„(ëŠë‚Œí‘œ, ë§ì¤„ì„í‘œ, ë¬¼ìŒí‘œ ë“±)ì€ ì›ë¬¸ì˜ ê°ì •Â·ê°•ì¡°ë¥¼ ì‚´ë¦¬ê¸° ìœ„í•´ ë²ˆì—­ ì‹œ ìœ ì§€í•˜ë„ë¡ ê°€ì´ë“œí•œë‹¤.**

```
You are a student manager communicating with Christian youth and adult students in {targetCountry}.
Your role is to translate text naturally and conversationally, specifically tailored for Christians in the selected country/region ({targetCountry}).
Use "Brother" or "Sister" as the standard greeting when the recipient gender is known ({recipientGender}); otherwise keep a neutral, respectful tone.

# STYLE GUIDELINES:
1. Tone: Respectful, friendly, and approachable.
2. Universal Phrasing: Use "Brother" or "Sister" as the standard greeting when appropriate for {recipientGender}.
3. Natural Mix: Use a mix of English loanwords where natural in the target region (e.g., Join, Class, Link).
4. Conciseness: Keep sentences brief and clear.
5. Preserve Expression: Keep all emojis (e.g. ğŸ˜Š ğŸ™) and emotional punctuation (e.g. ! â€¦ ?) from the source text in the translation. Do not remove or normalize them.

# IMPORTANT RULES:
1. NEVER include explanatory phrases. ONLY output translated text.
2. Output each language separated by its [Language] tag.
```

| ë³€ìˆ˜ | ì„¤ëª… |
|------|------|
| `{targetCountry}` | ë²ˆì—­ ëŒ€ìƒì êµ­ê°€(ì˜ë¬¸ í‘œê¸°). ì˜ˆ: India, USA, Philippines |
| `{recipientGender}` | ë²ˆì—­ ëŒ€ìƒì ì„±ë³„. ì˜ˆ: male, female, unspecified |

### 6.3 translatePrompt í…œí”Œë¦¿

ì•„ë˜ í…œí”Œë¦¿ì˜ ë³€ìˆ˜ë¥¼ ëŸ°íƒ€ì„ì— ì¹˜í™˜í•˜ì—¬ ì™„ì„±ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•œë‹¤. **ì´ëª¨ì§€Â·ë¬¸ì¥í‘œí˜„ ìœ ì§€** ì§€ì‹œ ë¬¸êµ¬ë¥¼ í¬í•¨í•˜ì—¬, ì›ë¬¸ì˜ ê°ì •Â·ê°•ì¡°ê°€ ë²ˆì—­ë¬¸ì—ë„ ë°˜ì˜ë˜ë„ë¡ í•œë‹¤.

```
ë‹¤ìŒ {inputLangName} í…ìŠ¤íŠ¸ë¥¼ {outputLangNames}ë¡œ ë²ˆì—­í•´ì£¼ì„¸ìš”.
ë²ˆì—­ ê²°ê³¼ëŠ” [Korean], [English], [Telugu] ì™€ ê°™ì´ ê° ì–¸ì–´ë³„ êµ¬ë¶„ìë¥¼ ë‹¬ì•„ ì¶œë ¥í•˜ì„¸ìš”.
ì›ë¬¸ì— í¬í•¨ëœ ì´ëª¨ì§€(ğŸ˜Š, ğŸ™ ë“±)ì™€ ë¬¸ì¥í‘œí˜„(ëŠë‚Œí‘œ !, ë§ì¤„ì„í‘œ â€¦, ë¬¼ìŒí‘œ ? ë“± ê°ì •Â·ê°•ì¡°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê¸°í˜¸)ì€ ê·¸ëŒ€ë¡œ ì‚´ë ¤ì„œ ë²ˆì—­í•´ì£¼ì„¸ìš”.

í…ìŠ¤íŠ¸:
{text}
```

| ë³€ìˆ˜ | ì„¤ëª… |
|------|------|
| `{inputLangName}` | ì…ë ¥ ì–¸ì–´ì˜ í•œêµ­ì–´ëª… (ì˜ˆ: í•œêµ­ì–´) |
| `{outputLangNames}` | ì¶œë ¥ ì–¸ì–´ ëª©ë¡ (ì˜ˆ: ì˜ì–´, í…”ë£¨êµ¬ì–´) |
| `{text}` | ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì›ë¬¸ |

### 6.4 ì‘ë‹µ íŒŒì‹± ê·œì¹™

Gemini ì‘ë‹µì— í¬í•¨ëœ `[LanguageName]` êµ¬ë¶„ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¶„í• í•˜ì—¬ ì–¸ì–´ë³„ ê²°ê³¼ë¥¼ ì¶”ì¶œí•œë‹¤.

**ì‘ë‹µ ì˜ˆì‹œ:**

```
[Korean]
í˜•ì œë‹˜, ìˆ˜ì—…ì— ì°¸ì—¬í•  ì‹œê°„ì…ë‹ˆë‹¤.

[English]
Brother, it's time to join the class.

[Telugu]
à°¬à±à°°à°¦à°°à±, à°•à±à°²à°¾à°¸à± à°œà°¾à°¯à°¿à°¨à± à°…à°µà±à°µà°¡à°¾à°¨à°¿à°•à°¿ à°‡à°¦à°¿ à°¸à°®à°¯à°‚.
```

**íŒŒì‹± ë¡œì§ (ì˜ì‚¬ ì½”ë“œ):**

```ts
const regex = /\[([\w\s]+)\]\n([\s\S]*?)(?=\n\[|$)/g;
// match[1] â†’ ì–¸ì–´ëª…, match[2] â†’ ë²ˆì—­ í…ìŠ¤íŠ¸
// ê²°ê³¼ë¥¼ { langName: translatedText } í˜•íƒœì˜ ê°ì²´ë¡œ ë³€í™˜
```

---

## 7. API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### 7.1 íšŒì›ê°€ì…

| í•­ëª© | ë‚´ìš© |
|------|------|
| Method | POST |
| Path | `/api/auth/register` |
| Body | `{ "user_id": "string" }` |
| Response | 200: `{ "success": true }` \| 409: `{ "error": "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””" }` |

### 7.2 ë¡œê·¸ì¸ í™•ì¸

| í•­ëª© | ë‚´ìš© |
|------|------|
| Method | POST |
| Path | `/api/auth/login` |
| Body | `{ "user_id": "string" }` |
| Response | 200: `{ "success": true }` \| 404: `{ "error": "ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë””" }` |

### 7.3 ê³„ì • ì„¤ì • ì¡°íšŒ/ì €ì¥

| í•­ëª© | ë‚´ìš© |
|------|------|
| Method | GET \| POST |
| Path | `/api/settings` |
| GET Query | `user_id` (í•„ìˆ˜). ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì‹ë³„ |
| GET Response | 200: `{ "recipient_country": "string" \| null, "recipient_gender": "string" \| null, "output_langs": ["en","te"] \| null }` (ì—†ìœ¼ë©´ null) |
| POST Body | `{ "user_id": "string", "recipient_country": "string", "recipient_gender": "string", "output_langs": ["en","te"] }` |
| POST ë™ì‘ | account_id ì¡°íšŒ í›„ `multi_translator_account_settings` upsert |
| POST Response | 200: `{ "success": true }` |

### 7.4 ë²ˆì—­ ìš”ì²­

| í•­ëª© | ë‚´ìš© |
|------|------|
| Method | POST |
| Path | `/api/translate` |
| Body | `{ "user_id": "string", "text": "string", "input_lang": "ko", "output_langs": ["en", "te"], "recipient_country": "string", "recipient_gender": "string" }` |
| ë™ì‘ | 1) í”„ë¡¬í”„íŠ¸ ì¡°í•©(systemPromptì— recipient_countryÂ·recipient_gender ë°˜ì˜) â†’ 2) Gemini API í˜¸ì¶œ â†’ 3) ì‘ë‹µ íŒŒì‹± â†’ 4) DB ì €ì¥(parsed_results, input_lang, output_langs, recipient_country, recipient_gender) â†’ 5) ê²°ê³¼ ë°˜í™˜ |
| Response | 200: `{ "parsed": { "Korean": "...", "English": "..." }, "raw": "..." }` |

---

## 8. UI/UX ìš”êµ¬ì‚¬í•­

### 8.1 ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

| ë¸Œë ˆì´í¬í¬ì¸íŠ¸ | ë ˆì´ì•„ì›ƒ | íŠ¹ì§• |
|--------------|---------|------|
| < 768px (ëª¨ë°”ì¼) | ë‹¨ì¼ ì»¬ëŸ¼, ìˆ˜ì§ ìŠ¤íƒ | ì…ë ¥ â†’ ì„¤ì • â†’ ê²°ê³¼ ìˆœì„œë¡œ ë°°ì¹˜ |
| â‰¥ 768px (PC) | 2ì»¬ëŸ¼ (ì¢Œ: ì…ë ¥, ìš°: ê²°ê³¼) | ì–¸ì–´ ì„¤ì •ì€ ìƒë‹¨ ë°” ë˜ëŠ” ì‚¬ì´ë“œíŒ¨ë„ |

### 8.2 ê³µí†µ ì»´í¬ë„ŒíŠ¸

- **Header**: ì•± ì´ë¦„ + ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ + ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
- **RecipientSelector**: ë²ˆì—­ ëŒ€ìƒì êµ­ê°€ ë“œë¡­ë‹¤ìš´ + ì„±ë³„ ì„ íƒ(ë‚¨/ì—¬/ë¯¸ì„ íƒ ë“±)
- **LanguageSelector**: ì…ë ¥ ì–¸ì–´ ë“œë¡­ë‹¤ìš´ + ì¶œë ¥ ì–¸ì–´ ë©€í‹°ì…€ë ‰íŠ¸
- **TranslationInput**: Textarea + ë²ˆì—­í•˜ê¸° ë²„íŠ¼
- **TranslationResultCard**: ì–¸ì–´ ë¼ë²¨ + ë²ˆì—­ í…ìŠ¤íŠ¸ + ë³µì‚¬ ë²„íŠ¼
- **CopyAllButton**: ì „ì²´ ë³µì‚¬ ë²„íŠ¼
- **LoadingSpinner**: ë²ˆì—­ ì¤‘ í‘œì‹œ
- **Toast**: ë³µì‚¬ ì„±ê³µ/ì—ëŸ¬ ì•Œë¦¼

---

## 9. ê°œë°œ ì ˆì°¨ ë° ì»¤ë°‹ ë‹¨ìœ„

ê° ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ë§ˆì¹œ ë’¤ ì»¤ë°‹í•œë‹¤.

1. í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¸íŒ…: Next.js + Tailwind CSS + shadcn/ui ì„¤ì¹˜, Supabase ì—°ê²°, í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
2. DB ë§ˆì´ê·¸ë ˆì´ì…˜: `multi_translator_account`, `multi_translator_account_settings`, `multi_translator_data` í…Œì´ë¸” ìƒì„± SQL ì‘ì„± ë° ì ìš©
3. íšŒì›ê°€ì… í˜ì´ì§€ êµ¬í˜„: `/register` â€” API Route + Supabase ì €ì¥ + ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—°ë™
4. ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„: `/login` â€” ì•„ì´ë”” ì¡°íšŒ + ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ + ìë™ ë¡œê·¸ì¸ ìœ ì§€
5. **ë²ˆì—­ ëŒ€ìƒì UI ë° ì„¤ì • API**: RecipientSelector(êµ­ê°€Â·ì„±ë³„ ì„ íƒ), `/api/settings` GET/POST ì—°ë™, ì„¤ì • ì €ì¥ ë²„íŠ¼, í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì„¤ì • ë°˜ì˜
6. ì–¸ì–´ ì„ íƒ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„: LanguageSelector (ë‹¨ì¼ ì…ë ¥ / ë‹¤ì¤‘ ì¶œë ¥ ì„ íƒ)
7. í”„ë¡¬í”„íŠ¸ ì¡°í•© ìœ í‹¸ë¦¬í‹° êµ¬í˜„: systemPrompt(`{targetCountry}`, `{recipientGender}` ì¹˜í™˜) + translatePrompt í…œí”Œë¦¿ â†’ ì™„ì„± í”„ë¡¬í”„íŠ¸ ìƒì„±
8. Gemini API ì—°ë™: `/api/translate` Route êµ¬í˜„ (Bodyì— recipient_country, recipient_gender í¬í•¨) + ì‘ë‹µ íŒŒì‹± ë¡œì§
9. ë²ˆì—­ ê²°ê³¼ UI êµ¬í˜„: TranslationResultCard + ê°œë³„ ë³µì‚¬ + ì „ì²´ ë³µì‚¬
10. DB ì €ì¥ ë¡œì§ ì—°ë™: ë²ˆì—­ ì™„ë£Œ ì‹œ `multi_translator_data`ì— parsed_results, output_langs, recipient_country, recipient_gender ì €ì¥
11. ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ìµœì¢… ì¡°ì • ë° ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸
12. Vercel ë°°í¬ ì„¤ì • ë° í™˜ê²½ ë³€ìˆ˜ ë“±ë¡, ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸

---

## 10. í™˜ê²½ ë³€ìˆ˜

```env
# .env.local
NEXT_PUBLIC_SUPABASE_URL=https://xxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key   # ì„œë²„ ì „ìš©
GEMINI_API_KEY=your-gemini-api-key                # ì„œë²„ ì „ìš©
```

> â€» `GEMINI_API_KEY` ë° `SUPABASE_SERVICE_ROLE_KEY`ëŠ” ì„œë²„ ì‚¬ì´ë“œ(API Route)ì—ì„œë§Œ ì‚¬ìš©í•˜ë©° í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤.

---

## 11. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 11.1 ë³´ì•ˆ

- Gemini API KeyëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ í˜¸ì¶œ, í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ ê¸ˆì§€
- Supabase RLS(Row Level Security) ì„¤ì •í•˜ì—¬ ê³„ì •ë³„ ë°ì´í„° ê²©ë¦¬
- ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” êµ¬ì¡°ì´ë¯€ë¡œ user_idê°€ ì‹ë³„ì ì—­í•  â€” ì˜ˆì¸¡ ì–´ë ¤ìš´ ê³ ìœ  ID ê¶Œì¥ ì•ˆë‚´

### 11.2 ì„±ëŠ¥

- Gemini API ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° ê³ ë ¤ (ì´ˆê¸° êµ¬í˜„ì€ non-streaming, ì´í›„ ê°œì„  ê²€í† )
- Vercel Edge/Serverless Function ê¸°ë³¸ íƒ€ì„ì•„ì›ƒ ë‚´ ì²˜ë¦¬ (30ì´ˆ)

### 11.3 í™•ì¥ì„±

- ì–¸ì–´ ëª©ë¡ì€ ë³„ë„ ìƒìˆ˜ íŒŒì¼(`constants/languages.ts`)ë¡œ ê´€ë¦¬í•˜ì—¬ ì¶”ê°€ ìš©ì´
- **ëŒ€ìƒ êµ­ê°€ ëª©ë¡**ì€ ë³„ë„ ìƒìˆ˜ íŒŒì¼(`constants/countries.ts` ë“±)ë¡œ ê´€ë¦¬í•˜ì—¬ ì¶”ê°€Â·ë³€ê²½ ìš©ì´ (ì˜ˆ: India, USA, Philippines)
- í”„ë¡¬í”„íŠ¸ëŠ” ë³„ë„ íŒŒì¼(`lib/prompts.ts`)ë¡œ ë¶„ë¦¬í•˜ì—¬ ì¶”í›„ DB ê¸°ë°˜ í¸ì§‘ ê¸°ëŠ¥ ì¶”ê°€ ëŒ€ë¹„
- Flutter ì•± ì§€ì› ì‹œ API Routeë¥¼ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ì¡° ìœ ì§€

---

*â€” END OF DOCUMENT â€”*
